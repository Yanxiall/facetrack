<!DOCTYPE HTML>

<html>
   <head>
      <script language="javascript" type="text/javascript">
	     var ws = new WebSocket("ws://192.168.0.101:8080/");
		 ws.onopen = function() {
					  // Web Socket is connected, send data using send()
			  alert("connection is made");
		 };
		 ws.onclose = function() { 
			  
			  // websocket is closed.
			  alert("Connection is closed..."); 
		 };
		 ws.onmessage = function (evt) { 
					  //var received_msg = evt.data;
					  alert("pic is received");
					  //alert(received_msg);
					  $("#image").attr('src', 'data:image/jpeg;charset=utf-8;base64,'+ evt.data);
					  //$("#image").attr('src', "data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==");
					  
		 }

         function WebSocketTest() {
            
            if ("WebSocket" in window) {
               alert("WebSocket is supported by your Browser!");
				 	  
            } else {
              
               // The browser doesn't support WebSocket
               alert("WebSocket NOT supported by your Browser!");
            }
         }
		 function Button_left() {
		        alert("left perssed");
                ws.send("a");
				//alert("clicked");
				//document.getElementById('img').setAttribute('src', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==');
				 /*
			    var image = document.getElementsByClassName("image");
		        image.src = "data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==");
				*/
		        
         }
		 function Button_right() {
                ws.send("d");
         }
		 function Button_up() {
                ws.send("w");
         }
		 function Button_down() {
                ws.send("s");
         }
		 
      </script>
   </head>
   
   <body>
      <img id="image" src="" alt="video" width="220" height="160"/>  
      <div id = "sse">
         <a href = "javascript:WebSocketTest()">Connect to raspberrry</a>
      </div>
	     <table align="center" class="style1">
            <tr>
                <td colspan="2" style="text-align: center">
                    <input id="btnUp" type="button" value="Up" onclick="Button_up()" />
                </td>
            </tr>
            <tr>
                <td style="text-align: center">
                    <input id="btnLeft" type="button" value="Left" onclick="Button_left()" />
                </td>
                <td style="text-align: center">
                    <input id="btnRight" type="button" value="Right" onclick="Button_right()" />
                </td>
            </tr>
            <tr>
                <td colspan="2" style="text-align: center">
                    <input id="btnDown" type="button" value="Down" onclick="Button_down()" />
                </td>
            </tr>
        </table>
      
   </body>
</html>